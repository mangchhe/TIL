# IP 체계, 서브넷 마스크

## IP

- 인터넷 계층의 IP 프로토콜은 IP 주소를 사용해서 호스트를 식별한다.
- IP는 각 호스트를 유일하게 식별할 수 있어야 하며 인터넷할당번호관리기관(IANA)에서 통합 관리한다.
- 현재 IP 프로토콜은 IPv4의 주소 체계를 사용하고 있고 급격히 증가하는 인터넷 사용자로 인해 IPv6로 대체하려고 한다.

## IPv4

- 2^32bit로 0과 1로 표현한 이진수 32자리를 말하며 대략 43억 개의 주소가 존재할 수 있다.
- 0과 1로 이루어진 이진수를 8비트씩 나누어 .를 seperator로 십진수로 바꿔서 사람이 보기 편한 형태로 나타낸다.

## IP 주소의 구성

- IP 주소는 호스트가 속한 네트워크 주소인 **네트워크 부**, 호스트 주소인 **호스트 부**로 구성이 된다.
- 네트워크 부는 어떤 네트워크에 속해있는지, 호스트 부는 특정 네트워크 내에서 어떤 호스트인지 구별할 때 사용한다.
- 즉, 네트워크 부가 다르면 라우터의 도움으로 인해 찾아가야 하고, 네트워크 부가 같으면 같은 네트워크상에서 라우터의 도움 없이 데이터를 전송할 수 있다.
- IP 주소 할당 기관에서 네트워크 부까지만 할당해주고, 네트워크 관리자는 직접 호스트 부를 결정하여 개별 IP 주소를 설정한다.
- 네트워크 부, 호스트 부를 나누는 기준은 원래 클래스를 기준으로 나누었지만, 현재는 서브넷 마스크 방식을 이용해 사용하고 있다.

## IP 주소의 클래스

- 클래스의 기준은 IP 주소를 앞에서 8비트씩 나눈 그룹을 조합하여 네트워크 부와 호스트 부를 정하였다.

![ip-class png](https://user-images.githubusercontent.com/50051656/184358031-4e14dde7-77a4-4d16-bf6f-43bf8784784c.png)

### A Class

![ip-a](https://user-images.githubusercontent.com/50051656/184358280-8779dab0-27c0-43f9-a578-8ac0a141685c.png)

- xxxx / xxxx.xxxx.xxxx, 앞 8비트를 네트워크 부, 뒤 24비트를 호스트 부로 한다.
- 네트워크 부의 첫 비트는 식별 비트인 0이 할당되기 때문에 00000000 ~ 01111111로 0~127까지 번호가 부여된다.
- 호스트 부는 0.0.0 ~ 255.255.255로 대략 1600만 개의 호스트를 가질 수 있고 호스트 부의 모든 비트가 0과 1인 번호는 특수 목적(브로드캐스트)으로 사용된다.
- 총 가질 수 있는 IP 주소의 범위는 0.0.0.0 ~ 127.255.255.255로 2^31개만큼 가질 수 있다.

### B Class

![ip-b](https://user-images.githubusercontent.com/50051656/184358285-3c205b8f-910a-4c52-ae8b-e90ba1897b77.png)

- xxxx.xxxx / xxxx.xxxx, 앞 16비트를 네트워크 부, 뒤 16비트를 호스트 부로 한다.
- B 클래스의 식별 비트는 10으로 네트워크 부는 10000000 ~ 10111111로 128.0 ~ 191.255 번호가 할당된다.
- 총 가질 수 있는 IP 주소의 범위는 128.0.0.0 ~ 191.255.255.255로 3^30개 만큼 가질 수 있다.

### C Class

![ip-c](https://user-images.githubusercontent.com/50051656/184358287-b332aac2-4c09-4dc0-941f-a4389777d4a6.png)

- xxxx.xxxx.xxxx / xxxx, 앞 24비트를 네트워크 부, 뒤 8비트를 호스트 부로 한다.
- C 클래스의 식별 비트는 110으로 네트워크 부는 11000000 ~ 11011111로 192.0.0.0 ~ 223.255.255 번호가 할당된다.
- 총 가질 수 있는 IP 주소의 범위는 192.0.0.0 ~ 223.255.255.255이다.

### 특수 목적의 주소 - 네트워크 주소, 브로드캐스트

- xxx.xxx.xxx.0, xxx.xxx.xxx.255와 같이 호스트 부의 모든 비트가 0 또는 1이면 특수 목적으로 사용된다.
- 해당 주소는 자신의 IP 주소로 설정할 수 없고 특수 목적인 네트워크 주소, 브로드캐스트로 사용된다
- 네트워크 주소는 xxx.xxx.xxx.0로 네트워크 자체를 의미하며 라우팅 프로토콜에서 네트워크를 지칭할 때 사용한다.
- 브로드캐스트 주소는 xxx.xxx.xxx.255로 하나의 네트워크 내에서 모든 호스트에게 데이터를 보낼 수 있는 IP 주소를 의미한다.

## 서브넷팅, 서브넷

- IP 주소 체계를 클래스로 정하게 되면, 네트워크마다 사용할 수 있는 IP 주소의 개수가 정해져있기 때문에 유연하지 못하다.
- 예를 들어 A 클래스는 하나의 네트워크당 1600만 개의 호스트를 가질 수 있고 대부분 이만큼의 호스트를 소유하지 않기 때문에 대부분이 사용되지 않는 IP가 될 것이다.
- IP 주소를 효율적으로 활용하기 위해서 A나 B 클래스 같은 대규모 네트워크를 더 작은 네트워크로 분할하는 것은 서브넷팅이라 하고, 그렇게 분할된 네트워크를 서브넷이라고 한다.
- 예를 들어 A 클래스의 두 번째 8비트를 서브넷 부로 설정하면 A클래스의 네트워크를 256개의 작은 네트워크로 분할한 것이다.
- 255개로 분할 된 네트워크를 약 6만 5천 개의 호스트씩 연결하게 했고 이들이 서로 통신하기 위해서는 서로 다른 네트워크이기 때문에 라우터가 필요하다.

## 서브넷 마스크

- IP 주소의 네트워크 부와 호스트 부의 경계를 식별하기 위해 만든 숫자이며 IP 주소의 32비트에 대응한 32비트로 구성되어 있다.
- IP 주소의 비트가 네트워크 부이면 서브넷 마크의 비트는 1이고 호스트 부이면 비트는 0이 된다.
- ex) 126.125.35.23 -> 255.255.255.0
- 서브넷 마스크를 이용하면 8비트 단위가 아니라 1비트 단위로도 네트워크 부를 구성할 수 있기 때문에 좀 더 세분화된 네트워크를 만들 수 있다.

![subnet-mask](https://user-images.githubusercontent.com/50051656/184360058-dcbb0e2c-c58c-47e0-b931-b3f498252f89.png)

### 프리픽스 표기법

- 서브넷 마스크를 슬래시와 네트워크 부 비트 수를 나타내는 프리픽스 표기법을 사용할 수 있다.
- 0.255.0.1/8 -> 앞에 8비트가 네트워크 부
- 0.255.0.1/16 -> 앞에 16비트가 네트워크 부

### 가능한 서브넷 마스크 값

![available-subnet-mask](https://user-images.githubusercontent.com/50051656/184360049-730eadf2-5545-4970-ba26-2f49de078dd9.png)

## References

- [https://code-lab1.tistory.com/33](https://code-lab1.tistory.com/33)
- [https://better-together.tistory.com/118](https://better-together.tistory.com/118)